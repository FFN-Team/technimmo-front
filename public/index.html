<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Web site created using create-react-app"
    />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />

    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />

    <title>React App</title>
    <style>
      body {
        margin: 0;
        padding: 0;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background-color: #f4f4f4;
      }
  
      header {
        background-color: #333;
        color: white;
        padding: 15px;
        text-align: center;
      }
  
      nav {
        width: 200px;
        height: 100%;
        background-color: #555;
        position: fixed;
        top: 0;
        left: -200px;
        transition: left 0.3s ease;
        overflow-y: auto;
      }
  
      nav a {
        display: block;
        padding: 15px;
        color: white;
        text-decoration: none;
        transition: background-color 0.3s;
      }
  
      nav a:hover {
        background-color: #777777;
      }
  
      main {
        margin-left: 200px;
        padding: 20px;
      }
  
      button {
        background-color: #333;
        color: white;
        padding: 10px;
        border: none;
        cursor: pointer;
        margin: 10px;
      }

      #notification-btn {
        background-color: #081209;
        color: white;
        border: none;
        border-radius: 50%;
        padding: 15px;
        top: 110px;
        right: 20px;
        cursor: pointer;
        font-size: 16px;
        position: fixed;
        display: flex;
        align-items: center;
        justify-content: center;
      }

    </style>
  </head>
  <body>
  
    <header>
      <h1>Page d'Accueil</h1>
    </header>
  
    <button onclick="toggleMenu()">Menu</button>
  
    <nav id="menu" onclick="toggleMenu()">
      <a href="#">Acqu√©reur</a>
      <a href="#">Bien</a>
    </nav>

    <button id="notification-btn" onclick="fetchNotification()">üîî</button>
    <div id="notification"></div>
  
    <main>
      <!-- Contenu principal de la page -->
      <p>::: Application en construction :::</p>
      <div id="root"></div>
    </main>
  
    <script>
      function toggleMenu() {
        var menu = document.getElementById('menu');
        if (menu.style.left === '-200px') {
          menu.style.left = '0';
        } else {
          menu.style.left = '-200px';
        }
      }
  
      // Masquer le menu lorsque l'utilisateur clique √† l'ext√©rieur de celui-ci
      document.addEventListener('click', function (event) {
        var menu = document.getElementById('menu');
        var button = document.querySelector('button');
  
        if (event.target !== menu && event.target !== button) {
          menu.style.left = '-200px';
        }
      });

      function fetchNotification() {
        var notificationDiv = document.getElementById('notification');

        // Si le div de notification est actuellement affich√©, le cacher
        if (notificationDiv.style.display === 'block') {
          hideNotification();
        } else {

          fetch('http://localhost:9001/api/v1/anticipatedProjects/notification', {
            method: 'POST',
            headers: {
            'Content-Type': 'application/json',
          },})
            .then(response => response.json())
            .then(data => {
              // Traitement du JSON ici
              console.log(data)
              displayNotification(data);
            })
          .catch(error => console.error('Erreur lors de la requ√™te :', error));
          }
      }

      function hideNotification() {
        var notificationDiv = document.getElementById('notification');
        notificationDiv.style.display = 'none';
      }


      function displayNotification(data) {
        // Manipulation du DOM pour afficher la notification
        var notificationDiv = document.getElementById('notification');
        var notificationParagraph = document.createElement('p');
        var stateContainer = document.createElement('div'); // Nouveau conteneur pour ${data[0].state}

        // Ajout du contenu avec les donn√©es de la notification
        notificationParagraph.innerHTML = `${data[0].message}`;

        // Styles pour la balise <p>
        notificationParagraph.style.margin = '0';
        notificationParagraph.style.color = 'white'; // Couleur du texte
        notificationParagraph.style.padding = '10px'; // Espacement interne

        // Styles pour le conteneur du ${data[0].state}
        stateContainer.style.backgroundColor = '#4CAF50'; // Couleur de fond du rectangle
        stateContainer.style.display = 'inline-block'; // Pour que le rectangle ne prenne que la largeur n√©cessaire
        stateContainer.style.padding = '5px'; // Espacement interne du rectangle

        // Styles pour la div de notification (carre)
        notificationDiv.style.display = 'block';
        notificationDiv.style.backgroundColor = '#777777'; // Couleur de fond
        notificationDiv.style.borderRadius = '5px'; // Coins arrondis
        notificationDiv.style.padding = '15px'; // Espacement interne
        
        // Ajout de la balise <p>, du conteneur du ${data[0].state} √† la div de notification
        notificationDiv.innerHTML = ''; // Pour supprimer tout contenu pr√©c√©dent
        stateContainer.innerHTML = ` ${data[0].state}`; // Contenu du rectangle

        notificationParagraph.appendChild(stateContainer);
        notificationDiv.appendChild(notificationParagraph);
      }

    </script>
  
  </body>
</html>
